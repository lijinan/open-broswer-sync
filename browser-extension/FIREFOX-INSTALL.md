# 🦊 Firefox扩展安装指南

## 🚀 快速安装

### 📋 前置条件
1. ✅ Firefox 78+ 浏览器
2. ✅ 后端服务运行在 `http://localhost:3001`
3. ✅ Web客户端运行在 `http://localhost:3002`

### 🔧 安装步骤

#### 方法一：临时安装（推荐用于开发测试）

1. **打开Firefox调试页面**
   ```
   地址栏输入: about:debugging
   ```

2. **选择此Firefox**
   - 点击左侧的"此Firefox"选项

3. **加载扩展**
   - 点击"临时载入附加组件"按钮
   - 浏览到项目的 `browser-extension` 文件夹
   - 选择 `manifest-firefox.json` 文件
   - 点击"打开"

4. **验证安装**
   - 扩展应该出现在已安装的附加组件列表中
   - 浏览器工具栏应该显示扩展图标 📚

#### 方法二：打包安装（用于生产环境）

1. **创建扩展包**
   ```bash
   # 进入扩展目录
   cd browser-extension
   
   # 确保使用Firefox manifest
   copy manifest-firefox.json manifest.json
   
   # 创建zip包（排除不必要文件）
   zip -r bookmark-sync-firefox.zip . -x "*.md" "test-*" "manifest-chrome.json"
   ```

2. **安装扩展包**
   - 打开 `about:addons`
   - 点击齿轮图标 → "从文件安装附加组件"
   - 选择创建的zip文件

## 🧪 功能测试

### 📝 测试清单

1. **基础功能测试**
   - [ ] 扩展图标显示在工具栏
   - [ ] 点击图标弹出扩展窗口
   - [ ] 登录功能正常工作
   - [ ] 设置页面可以正常打开

2. **书签功能测试**
   - [ ] 保存当前页面为书签
   - [ ] 右键菜单"保存为书签"
   - [ ] 快捷键 Ctrl+Shift+D

3. **密码功能测试**
   - [ ] 自动检测登录表单
   - [ ] 手动检测密码功能
   - [ ] 表单提交后提示保存
   - [ ] 右键菜单"保存密码信息"

4. **设置功能测试**
   - [ ] 三种工作模式切换
   - [ ] 各项开关设置生效
   - [ ] 设置导入导出功能
   - [ ] 快捷键 Ctrl+Shift+S

### 🔍 使用测试页面

打开测试页面验证功能：
```
file:///path/to/browser-extension/test-firefox.html
```

或者在任意网站测试：
1. 打开任意有登录表单的网站
2. 填写用户名密码
3. 观察扩展是否自动检测并提示保存

## 🐛 常见问题

### ❌ 扩展无法加载

**问题**: 选择manifest文件后没有反应
**解决**: 
- 确保选择的是 `manifest-firefox.json`
- 检查文件权限，确保Firefox可以读取
- 查看浏览器控制台是否有错误信息

### ❌ API错误

**问题**: 控制台显示API相关错误
**解决**:
- 确保 `browser-polyfill.js` 文件存在
- 检查manifest中是否正确引用了polyfill
- 验证Firefox版本是否支持所需API

### ❌ 权限问题

**问题**: 扩展功能受限或无法访问某些API
**解决**:
- 检查manifest中的permissions配置
- 确保Firefox版本支持所需权限
- 重新安装扩展

### ❌ 连接后端失败

**问题**: 无法连接到后端服务
**解决**:
- 确保后端服务运行在 `http://localhost:3001`
- 检查Firefox是否阻止了本地连接
- 在设置中修改服务器地址

## 🔧 开发调试

### 📊 查看日志
1. 打开开发者工具 (F12)
2. 切换到"控制台"标签
3. 查看扩展相关的日志输出

### 🔄 重新加载扩展
1. 打开 `about:debugging`
2. 找到扩展，点击"重新载入"按钮
3. 或者删除后重新安装

### 🧪 调试后台脚本
1. 在 `about:debugging` 中找到扩展
2. 点击"检查"按钮
3. 在打开的调试窗口中查看后台脚本

## 🎯 性能优化

### 🚀 提升加载速度
- 确保所有文件都在本地
- 避免不必要的网络请求
- 优化图标和资源文件大小

### 💾 减少内存占用
- 及时清理不需要的监听器
- 避免内存泄漏
- 合理使用缓存

## 🔒 安全注意事项

### 🛡️ 权限最小化
- 只申请必要的权限
- 定期审查权限使用情况
- 避免过度权限申请

### 🔐 数据安全
- 敏感数据加密存储
- 使用HTTPS连接后端
- 定期更新安全策略

## 📞 技术支持

### 🆘 获取帮助
- 查看控制台错误信息
- 检查扩展日志输出
- 参考Firefox扩展开发文档

### 📝 报告问题
提供以下信息：
- Firefox版本号
- 扩展版本号
- 错误信息截图
- 重现步骤描述

---

## 🎉 安装成功！

如果扩展正常工作，你应该能看到：
- ✅ 工具栏中的扩展图标
- ✅ 点击图标显示功能面板
- ✅ 右键菜单中的扩展选项
- ✅ 自动检测登录表单功能

**开始享受跨浏览器的书签密码同步体验！** 🚀