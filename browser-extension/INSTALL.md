# 🚀 浏览器扩展安装指南

## 📋 安装前准备

### 1. 确保服务运行
```bash
# 后端服务
cd backend
npm run dev

# 前端服务  
cd web-client
npm run dev
```

### 2. 创建测试用户
访问 http://localhost:3002 注册一个测试账号，或使用以下测试账号：
- 用户名: `extension@test.com`
- 密码: `extension123`

## 🔧 Chrome/Edge 安装

### 方法一：开发者模式安装 (推荐)

1. **打开扩展管理页面**
   - Chrome: 地址栏输入 `chrome://extensions/`
   - Edge: 地址栏输入 `edge://extensions/`

2. **开启开发者模式**
   - 点击页面右上角的"开发者模式"开关

3. **加载扩展**
   - 点击"加载已解压的扩展程序"
   - 选择项目中的 `browser-extension` 文件夹
   - 点击"选择文件夹"

4. **验证安装**
   - 扩展应该出现在扩展列表中
   - 浏览器工具栏会显示扩展图标

### 方法二：打包安装

1. **打包扩展**
   - 在扩展管理页面点击"打包扩展程序"
   - 选择 `browser-extension` 文件夹
   - 生成 `.crx` 文件

2. **安装扩展**
   - 将 `.crx` 文件拖拽到扩展管理页面
   - 点击"添加扩展程序"

## 🦊 Firefox 安装

### 方法一：临时安装 (开发测试)

1. **打开调试页面**
   - 地址栏输入 `about:debugging`

2. **选择此Firefox**
   - 点击左侧的"此Firefox"

3. **临时载入附加组件**
   - 点击"临时载入附加组件"
   - 选择 `browser-extension/manifest-firefox.json` 文件

### 方法二：永久安装

1. **安装web-ext工具**
   ```bash
   npm install -g web-ext
   ```

2. **准备Firefox清单**
   ```bash
   cd browser-extension
   cp manifest-firefox.json manifest.json
   ```

3. **打包扩展**
   ```bash
   web-ext build
   ```

4. **安装扩展**
   - 将生成的 `.xpi` 文件拖拽到Firefox
   - 点击"添加"

## ✅ 安装验证

### 1. 检查扩展图标
- 浏览器工具栏应显示扩展图标
- 图标为蓝色背景的书签样式

### 2. 测试扩展弹窗
- 点击扩展图标
- 应显示登录界面或主功能界面

### 3. 测试登录功能
- 输入测试账号信息
- 服务器地址: `http://localhost:3001`
- 用户名: `extension@test.com`
- 密码: `extension123`

### 4. 验证功能
- 登录成功后应显示主功能按钮
- 状态显示"已连接 - 扩展测试用户"

## 🧪 功能测试

### 1. 书签保存测试
- 访问任意网页
- 点击扩展图标 → "保存当前页面为书签"
- 或右键页面 → "保存为书签"

### 2. 密码检测测试
- 打开 `browser-extension/test-page.html`
- 在登录表单中输入测试数据
- 观察是否出现保存提示

### 3. 设置功能测试
- 在扩展弹窗中测试设置开关
- 测试自动检测和确认保存功能

## 🔧 常见问题

### Q: 扩展图标不显示
**A:** 检查是否正确选择了文件夹，确保选择的是包含 `manifest.json` 的文件夹

### Q: 登录失败
**A:** 
1. 确保后端服务正在运行 (http://localhost:3001)
2. 检查用户名密码是否正确
3. 查看浏览器控制台是否有错误信息

### Q: 无法保存书签
**A:**
1. 确保已成功登录
2. 检查网络连接
3. 查看扩展控制台错误信息

### Q: Firefox安装失败
**A:**
1. 确保使用了 `manifest-firefox.json`
2. 检查Firefox版本是否支持 (需要57+)
3. 尝试临时安装方式

## 🛠️ 开发调试

### 1. 查看扩展日志
- Chrome: 扩展管理页面 → 点击扩展详情 → "检查视图"
- Firefox: about:debugging → 扩展详情 → "调试"

### 2. 重新加载扩展
- 修改代码后需要重新加载扩展
- Chrome/Edge: 扩展管理页面点击刷新按钮
- Firefox: about:debugging页面重新载入

### 3. 查看网络请求
- 在扩展弹窗中按F12打开开发者工具
- 查看Network标签页的API请求

## 📞 技术支持

如果遇到问题，请：
1. 查看浏览器控制台错误信息
2. 检查后端服务日志
3. 确认网络连接正常
4. 参考项目文档中的故障排除部分

---

**🎉 安装完成后，享受便捷的书签密码管理体验！**