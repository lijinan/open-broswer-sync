<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ä¹¦ç­¾å¯†ç åŒæ­¥åŠ©æ‰‹ - è®¾ç½®</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .logo {
      font-size: 24px;
      font-weight: bold;
      color: #1890ff;
      margin-bottom: 8px;
    }
    
    .subtitle {
      color: #666;
      font-size: 14px;
    }
    
    .section {
      background: white;
      margin-bottom: 20px;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .section-title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
      margin-bottom: 15px;
      border-bottom: 2px solid #1890ff;
      padding-bottom: 8px;
    }
    
    .mode-option {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 12px;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
    }
    
    .mode-option:hover {
      border-color: #1890ff;
      box-shadow: 0 2px 8px rgba(24, 144, 255, 0.2);
    }
    
    .mode-option.selected {
      border-color: #1890ff;
      background: #f0f8ff;
    }
    
    .mode-option input[type="radio"] {
      position: absolute;
      opacity: 0;
    }
    
    .mode-title {
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }
    
    .mode-icon {
      margin-right: 8px;
      font-size: 18px;
    }
    
    .mode-desc {
      color: #666;
      font-size: 14px;
      line-height: 1.5;
    }
    
    .feature-list {
      margin-top: 10px;
      padding-left: 20px;
    }
    
    .feature-list li {
      color: #555;
      font-size: 13px;
      margin-bottom: 4px;
    }
    
    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .setting-item:last-child {
      border-bottom: none;
    }
    
    .setting-label {
      flex: 1;
      margin-right: 16px;
    }
    
    .setting-title {
      font-weight: 500;
      color: #333;
      margin-bottom: 4px;
    }
    
    .setting-desc {
      font-size: 12px;
      color: #666;
    }
    
    .toggle {
      width: 48px;
      height: 24px;
      background: #ccc;
      border-radius: 12px;
      position: relative;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    .toggle.active {
      background: #1890ff;
    }
    
    .toggle::after {
      content: '';
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 2px;
      left: 2px;
      transition: transform 0.3s;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }
    
    .toggle.active::after {
      transform: translateX(24px);
    }
    
    .input-group {
      margin-bottom: 16px;
    }
    
    .input-label {
      display: block;
      font-weight: 500;
      color: #333;
      margin-bottom: 6px;
    }
    
    .input-field {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #d9d9d9;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    
    .input-field:focus {
      outline: none;
      border-color: #1890ff;
      box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s;
    }
    
    .btn-primary {
      background: #1890ff;
      color: white;
    }
    
    .btn-primary:hover {
      background: #40a9ff;
    }
    
    .btn-secondary {
      background: #f5f5f5;
      color: #666;
      border: 1px solid #d9d9d9;
    }
    
    .btn-secondary:hover {
      background: #e6f7ff;
      border-color: #1890ff;
      color: #1890ff;
    }
    
    .status-message {
      padding: 12px 16px;
      border-radius: 4px;
      margin-bottom: 16px;
      font-size: 14px;
    }
    
    .status-success {
      background: #f6ffed;
      border: 1px solid #b7eb8f;
      color: #52c41a;
    }
    
    .status-error {
      background: #fff2f0;
      border: 1px solid #ffccc7;
      color: #ff4d4f;
    }
    
    .footer {
      text-align: center;
      margin-top: 30px;
      padding: 20px;
      color: #999;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">ğŸ“š ä¹¦ç­¾å¯†ç åŒæ­¥åŠ©æ‰‹</div>
    <div class="subtitle">é…ç½®æ‚¨çš„åŒæ­¥æ¨¡å¼å’Œåå¥½è®¾ç½®</div>
  </div>

  <div id="statusMessage" class="status-message" style="display: none;"></div>

  <!-- å·¥ä½œæ¨¡å¼é€‰æ‹© -->
  <div class="section">
    <div class="section-title">ğŸ›ï¸ å·¥ä½œæ¨¡å¼</div>
    
    <div class="mode-option" data-mode="cooperative">
      <input type="radio" name="workMode" value="cooperative" id="mode-cooperative">
      <div class="mode-title">
        <span class="mode-icon">ğŸ¤</span>
        åä½œæ¨¡å¼ (æ¨è)
      </div>
      <div class="mode-desc">
        ä¸æµè§ˆå™¨åŸç”ŸåŠŸèƒ½å¹¶å­˜ï¼Œä½œä¸ºè¡¥å……å’Œå¢å¼ºã€‚ä¿æŒç”¨æˆ·ä¹ æƒ¯ï¼Œæä¾›é¢å¤–çš„åŒæ­¥åŠŸèƒ½ã€‚
      </div>
      <ul class="feature-list">
        <li>âœ… ä¿ç•™æµè§ˆå™¨åŸç”Ÿä¹¦ç­¾å’Œå¯†ç åŠŸèƒ½</li>
        <li>âœ… æ‰‹åŠ¨ä¿å­˜åˆ°åŒæ­¥æœåŠ¡</li>
        <li>âœ… è·¨æµè§ˆå™¨æ•°æ®åŒæ­¥</li>
        <li>âœ… å­¦ä¹ æˆæœ¬æœ€ä½</li>
      </ul>
    </div>

    <div class="mode-option" data-mode="smart">
      <input type="radio" name="workMode" value="smart" id="mode-smart">
      <div class="mode-title">
        <span class="mode-icon">ğŸ§ </span>
        æ™ºèƒ½æ¨¡å¼
      </div>
      <div class="mode-desc">
        æ™ºèƒ½æ‹¦æˆªæµè§ˆå™¨æ“ä½œï¼Œè‡ªåŠ¨ä¿å­˜åˆ°åŒæ­¥æœåŠ¡ï¼Œä½†ä¿ç•™åŸç”ŸåŠŸèƒ½ä½œä¸ºå¤‡é€‰ã€‚
      </div>
      <ul class="feature-list">
        <li>ğŸ”„ è‡ªåŠ¨æ‹¦æˆªCtrl+Dä¹¦ç­¾ä¿å­˜</li>
        <li>ğŸ”„ è‡ªåŠ¨æ£€æµ‹å¯†ç è¡¨å•å¹¶ä¿å­˜</li>
        <li>âœ… ä¿ç•™åŸç”ŸåŠŸèƒ½ä½œä¸ºå¤‡é€‰</li>
        <li>âš¡ æå‡ä½¿ç”¨æ•ˆç‡</li>
      </ul>
    </div>

    <div class="mode-option" data-mode="replace">
      <input type="radio" name="workMode" value="replace" id="mode-replace">
      <div class="mode-title">
        <span class="mode-icon">ğŸ¯</span>
        æ›¿æ¢æ¨¡å¼
      </div>
      <div class="mode-desc">
        å®Œå…¨æ¥ç®¡æµè§ˆå™¨çš„ä¹¦ç­¾å’Œå¯†ç åŠŸèƒ½ï¼Œæä¾›ç»Ÿä¸€çš„ç®¡ç†ä½“éªŒã€‚
      </div>
      <ul class="feature-list">
        <li>ğŸ”’ ç¦ç”¨æµè§ˆå™¨åŸç”Ÿå¯†ç ç®¡ç†å™¨</li>
        <li>ğŸ“š æ›¿æ¢æµè§ˆå™¨ä¹¦ç­¾ç³»ç»Ÿ</li>
        <li>ğŸ¯ ç»Ÿä¸€çš„ç®¡ç†ç•Œé¢</li>
        <li>âš ï¸ éœ€è¦é€‚åº”æ–°çš„æ“ä½œæ–¹å¼</li>
      </ul>
    </div>
  </div>

  <!-- æœåŠ¡å™¨è®¾ç½® -->
  <div class="section">
    <div class="section-title">ğŸŒ æœåŠ¡å™¨è®¾ç½®</div>
    
    <div class="input-group">
      <label class="input-label" for="serverUrl">æœåŠ¡å™¨åœ°å€</label>
      <input type="text" class="input-field" id="serverUrl" placeholder="http://localhost:3001">
    </div>
    
    <div class="input-group">
      <label class="input-label" for="apiTimeout">è¯·æ±‚è¶…æ—¶ (ç§’)</label>
      <input type="number" class="input-field" id="apiTimeout" min="5" max="60" value="10">
    </div>
  </div>

  <!-- ä¹¦ç­¾è®¾ç½® -->
  <div class="section">
    <div class="section-title">ğŸ“š ä¹¦ç­¾è®¾ç½®</div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">è‡ªåŠ¨æ£€æµ‹ä¹¦ç­¾ä¿å­˜</div>
        <div class="setting-desc">ç›‘å¬Ctrl+Då¿«æ·é”®ï¼Œè‡ªåŠ¨ä¿å­˜åˆ°åŒæ­¥æœåŠ¡</div>
      </div>
      <div class="toggle" id="autoBookmarkSave"></div>
    </div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">è¦†ç›–æµè§ˆå™¨ä¹¦ç­¾å¿«æ·é”®</div>
        <div class="setting-desc">ä½¿ç”¨Ctrl+Dä¿å­˜åˆ°åŒæ­¥æœåŠ¡è€Œä¸æ˜¯æµè§ˆå™¨</div>
      </div>
      <div class="toggle" id="overrideBookmarkShortcut"></div>
    </div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">æ˜¾ç¤ºä¿å­˜ç¡®è®¤</div>
        <div class="setting-desc">ä¿å­˜ä¹¦ç­¾æ—¶æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†</div>
      </div>
      <div class="toggle active" id="confirmBookmarkSave"></div>
    </div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">è‡ªåŠ¨åˆ†ç±»ä¹¦ç­¾</div>
        <div class="setting-desc">æ ¹æ®ç½‘ç«™åŸŸåè‡ªåŠ¨åˆ›å»ºæ–‡ä»¶å¤¹åˆ†ç±»</div>
      </div>
      <div class="toggle" id="autoBookmarkCategory"></div>
    </div>
  </div>

  <!-- å¯†ç è®¾ç½® -->
  <div class="section">
    <div class="section-title">ğŸ” å¯†ç è®¾ç½®</div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">è‡ªåŠ¨æ£€æµ‹å¯†ç è¡¨å•</div>
        <div class="setting-desc">é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æµ‹ç™»å½•è¡¨å•</div>
      </div>
      <div class="toggle active" id="autoPasswordDetect"></div>
    </div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">æ‹¦æˆªæµè§ˆå™¨å¯†ç ä¿å­˜</div>
        <div class="setting-desc">é˜»æ­¢æµè§ˆå™¨å¼¹å‡ºå¯†ç ä¿å­˜æç¤º</div>
      </div>
      <div class="toggle" id="interceptPasswordSave"></div>
    </div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">è‡ªåŠ¨å¡«å……å¯†ç </div>
        <div class="setting-desc">é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨å¡«å……å·²ä¿å­˜çš„å¯†ç </div>
      </div>
      <div class="toggle" id="autoPasswordFill"></div>
    </div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">æ˜¾ç¤ºä¿å­˜ç¡®è®¤</div>
        <div class="setting-desc">ä¿å­˜å¯†ç æ—¶æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†</div>
      </div>
      <div class="toggle active" id="confirmPasswordSave"></div>
    </div>
  </div>

  <!-- é«˜çº§è®¾ç½® -->
  <div class="section">
    <div class="section-title">âš™ï¸ é«˜çº§è®¾ç½®</div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">å¯ç”¨è°ƒè¯•æ¨¡å¼</div>
        <div class="setting-desc">åœ¨æ§åˆ¶å°æ˜¾ç¤ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯</div>
      </div>
      <div class="toggle" id="debugMode"></div>
    </div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">æ•°æ®å¤‡ä»½æé†’</div>
        <div class="setting-desc">å®šæœŸæé†’ç”¨æˆ·å¤‡ä»½æ•°æ®</div>
      </div>
      <div class="toggle active" id="backupReminder"></div>
    </div>
    
    <div class="setting-item">
      <div class="setting-label">
        <div class="setting-title">ç»Ÿè®¡ä½¿ç”¨æƒ…å†µ</div>
        <div class="setting-desc">æ”¶é›†åŒ¿åä½¿ç”¨ç»Ÿè®¡ä»¥æ”¹è¿›åŠŸèƒ½</div>
      </div>
      <div class="toggle" id="usageStats"></div>
    </div>
  </div>

  <!-- æµ‹è¯•å·¥å…· -->
  <div class="section">
    <div class="section-title">ğŸ§ª æµ‹è¯•å·¥å…·</div>
    <div style="margin-bottom: 15px;">
      <button class="btn btn-primary" onclick="openFirefoxTest()" style="font-size: 16px; padding: 12px 24px;">
        ğŸ¦Š æ‰“å¼€Firefoxä¸“ç”¨æµ‹è¯•å·¥å…·
      </button>
    </div>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px;">
      <button class="btn btn-secondary" onclick="openTestTool('test-firefox-bookmark-sync.html')">Firefoxä¹¦ç­¾åŒæ­¥æµ‹è¯•</button>
      <button class="btn btn-secondary" onclick="openTestTool('test-user-info.html')">ç”¨æˆ·ä¿¡æ¯æµ‹è¯•</button>
      <button class="btn btn-secondary" onclick="openTestTool('test-bookmark-duplicate-fix.html')">ä¹¦ç­¾é‡å¤ä¿®å¤æµ‹è¯•</button>
      <button class="btn btn-secondary" onclick="openTestTool('test-url-matching.html')">URLåŒ¹é…æµ‹è¯•</button>
      <button class="btn btn-secondary" onclick="openTestTool('test-folder-sync.html')">æ–‡ä»¶å¤¹åŒæ­¥æµ‹è¯•</button>
      <button class="btn btn-secondary" onclick="openTestTool('test-full-sync.html')">å…¨é‡åŒæ­¥æµ‹è¯•</button>
    </div>
  </div>

  <!-- æ“ä½œæŒ‰é’® -->
  <div class="section">
    <div style="display: flex; gap: 12px; justify-content: center;">
      <button class="btn btn-primary" id="saveSettings">ä¿å­˜è®¾ç½®</button>
      <button class="btn btn-secondary" id="resetSettings">é‡ç½®ä¸ºé»˜è®¤</button>
      <button class="btn btn-secondary" id="exportSettings">å¯¼å‡ºè®¾ç½®</button>
      <button class="btn btn-secondary" id="importSettings">å¯¼å…¥è®¾ç½®</button>
    </div>
  </div>

  <div class="footer">
    <div>ä¹¦ç­¾å¯†ç åŒæ­¥åŠ©æ‰‹ v2.0 - å¯é…ç½®æ¨¡å¼</div>
    <div>ç§æœ‰åŒ–éƒ¨ç½² Â· å®‰å…¨å¯é  Â· çµæ´»é…ç½®</div>
  </div>

  <script src="browser-polyfill.js"></script>
  <script src="options.js"></script>
</body>
</html>